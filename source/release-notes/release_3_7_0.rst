.. Copyright (C) 2018 Wazuh, Inc.

.. _release_3_7_0:

3.7.0 Release Notes
===================

This section shows the most relevant improvements and fixes in version 3.7.0. More details about these changes are provided in each component changelog:

- `wazuh/wazuh <https://github.com/wazuh/wazuh/blob/v3.7.0/CHANGELOG.md>`_
- `wazuh/wazuh-api <https://github.com/wazuh/wazuh-api/blob/v3.7.0/CHANGELOG.md>`_
- `wazuh/wazuh-ruleset <https://github.com/wazuh/wazuh-ruleset/blob/v3.7.0/CHANGELOG.md>`_
- `wazuh/wazuh-kibana-app <https://github.com/wazuh/wazuh-kibana-app/blob/v3.7.0-6.4.2/CHANGELOG.md>`_
- `wazuh/wazuh-splunk <https://github.com/wazuh/wazuh-splunk/blob/v3.7.0-7.2.0/CHANGELOG.md>`_

Adding agents to multiple groups
--------------------------------

One of the most relevant enhancements of this new version consists of adding agents to more than one group simultaneously.

With this improvement, it's now possible to merge configuration from several groups and send it to the agents who belong to those groups. Every agent will have a centralized configuration comprised of different groups' configuration.

The new feature allows consulting all the agent's group information at *agent_groups* CLI and at the app with the RESTful API. You can learn more about this feature at the :ref:`multiple groups <grouping-agents>` documentation.

New Wazuh module to monitor Microsoft Azure
-------------------------------------------

The new ``azure-logs`` module for Wazuh has the ability to obtain and read Azure logs through several service APIs. This helps to monitor all the activity happening in the infrastructure, just by setting up the module to monitor the virtual machines that form the infrastructure, sending events to the Wazuh manager for analysis.

To learn more about this new module and how to configure it, check out the section :ref:`azure`.

New Wazuh module to monitor Docker
----------------------------------

The new ``docker`` module for Wazuh makes easier to monitor and collect the activity from your Docker containers such as starting, stopping or pausing events.

To learn more about this new module and how to configure it, check out the section :ref:`docker-monitor-index`.

Query remote configuration
--------------------------

It's now possible to query for the agent configuration in real time.

These on-demand queries allow searching for the currently applied configuration on the manager and each agent in every moment. As you can see on the screenshot with some basic agent information, this query lets to check the current settings about every enabled module.

.. thumbnail:: ../images/release-notes/kibana-remote-query.png
    :title: Query agent configuration using the Wazuh app
    :align: center
    :width: 100%

Improved performance of FIM and Analysis engines
------------------------------------------------

The Analysis and Integrity Monitoring engines has been enhanced with multithreaded processing. It takes advantage of all manager's resources by processing events in parallel, getting more performance at lower cost.

The registries generated by the File Integrity Monitoring system are now stored on a new SQLite database. Besides, the required storage resources have been reduced, making it faster and more efficient.

Distributed API requests in cluster mode
----------------------------------------

The cluster capabilities were improved to allow distributed API requests. Now the nodes communicate between them to collect information, such as agents status, logs, etc, providing data related to the whole architecture, instead of a single instance.

In addition to this, we've improved the *last keep alive* checking on the cluster nodes, disconnecting them if they don't have internet connection during a certain amount of time.

Advanced API filtering using queries
------------------------------------

In this version, the Wazuh API includes a brand-new filtering system. The ``q`` parameter allows you to request information using advanced queries with logical operators and separators. You can find a more detailed explanation of this feature on the :ref:`API queries <queries>` section.

New features for Kibana plugin
------------------------------

The Wazuh app for Kibana includes new features and interface redesigns to make use of the new features included in this version. As shown before, now you can get the current manager/agent configuration on the redesigned tabs. The interface has been organized in a more convenient way, and each setting is displayed in a more *human-readable* format for better comprehension. Besides, the JSON/XML viewers received a revamp to be more responsive.

The app is also compatible with the new multiple groups feature, so now each agent will show all its assigned groups. Clicking on any group on the information bar will redirect the user to the groups detail page, to see the configuration files and all the agents belonging to that group.

We've also added more quality-of-life improvements for the app:

  - Clicking on an agent ID on the *Discover* panels will open the agent panel to see the associated dashboards.
  - New *Actions* column added to the list of agents to quickly open the Discover panel or agent configuration.
  - The *Amazon AWS* tab has been redesigned to include more useful visualizations and your current :ref:`Amazon S3 <amazon>` wodle configuration.
  - The new :ref:`Osquery <osquery>` extension added on this version comes to show scans results in a more meaningful and easy to understand format.
  - Added a new selector to check the cluster nodes’ status and logs on the *Management > Status/Logs* tabs.
  - Several updates to descriptions and text, more bugfixes, performance improvements, and compatibility with the latest Elastic Stack version.

New features for Splunk plugin
------------------------------

The Wazuh app for Splunk also receives lots of new features and improvements on this new version. The Configuration tab is also improved as on the Kibana plugin to get the current manager/agent configuration, and multiple groups support.

In addition to this, the Splunk app now includes the *Monitoring* tab to show cluster-related information, such as alerts by node, cluster configuration, alerts summary, etc. The *Integrity monitoring* tab was also updated to reflect the latest changes from the Kibana app, including more useful visualizations. The *Amazon AWS* tab is now also available on the Splunk plugin to monitor your AWS-related alerts.

There are even more improvements and additions to the app, such as:

  - You can check our new documentation article to :ref:`set up a reverse proxy configuration <splunk_reverse_proxy>` for Nginx and the Splunk plugin.
  - Added a *Dev tools* tab to execute Wazuh API queries directly from the app, instead of using a terminal window.
  - Added an *Inventory data* tab to show :ref:`Syscollector <syscollector>` scans on your agents.
  - Added *app logs* to monitor to check and troubleshoot problems while using the app.
  - The new :ref:`Osquery <osquery>` tab added on this version comes to show scans results in a more meaningful and easy to understand format.
  - Added a new selector to check the cluster nodes’ status and logs on the *Management > Status/Logs* tabs.
  - Several updates to descriptions and text, more bugfixes, performance improvements, and compatibility with the latest Splunk version.
